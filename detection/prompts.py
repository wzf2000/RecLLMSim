score_prompt = """请根据以下用户和 LLM 的对话判断用户对于 LLM 最新一次回答的满意度，以下为满意度打分原则：
- **1**：十分不满意，没有任何帮助；
- **2**：不满意，无法帮助决定；
- **3**：一般，有一定启发但细节不够好；
- **4**：满意，有帮助，但还有提升空间；
- **5**：十分满意，回答很好，解决了我的问题，想不到更好的回答了。

以下为用户进行对话的相关任务背景信息：
{task_context}

以下为你需要判断的对话：
{context}

请根据上述对话与原则，判断用户对于 LLM 最新一轮回答的满意度（1/2/3/4/5），注意不要输出除了 1/2/3/4/5 之外的其他字符："""

binary_prompt = """请判断以下用户和 LLM 的对话中用户对于 LLM 最新一次回答是否满意。

以下是用户不满意（0）的对话示例：
{zero_example}

以下是用户满意（1）的对话示例：
{one_example}

以下为用户进行对话的相关任务背景信息：
{task_context}

以下为你需要判断的对话：
{context}

请给出用户是否满意（1 表示满意，0 表示不满意），注意不要输出除了 0/1 之外的其他字符："""

reason_prompts = ["""请根据以下用户和 LLM 的对话判断用户对于 LLM 最新一次回答为什么不够满意，以下为不够满意的可能原因：
- **不够细致（0）**：方案细节不够具体，预期获得更具体的描述；
- **不满足需求（1）**：方案内容与前文需求不符合，存在错误理解需求的问题；
- **不可用（2）**：结果不具有现实可实现性，过于理想或不符合实际情况；
- **不够多样（3）**：方案种类不够多样，预期获得更多的选择；
- **其它（4）**：其他原因导致不够满意。

以下是不够细致的对话示例：
{zero_example}

以下是不满足需求的对话示例：
{one_example}

以下是不可用的对话示例：
{two_example}

以下是不够多样的对话示例：
{three_example}

以下是其它原因的对话示例：
{four_example}

以下为你需要判断的对话：
{context}

请根据上述对话与原则，判断用户对于 LLM 最新一轮回答为什么不满意（0/1/2/3/4），注意不要输出除了 0/1/2/3/4 之外的其他字符：""",  """请根据以下用户和 LLM 的对话判断用户对于 LLM 最新一次回答为什么不够满意，以下为不够满意的可能原因：
- **不够细致（0）**：方案细节不够具体，预期获得更具体的描述；
- **不满足需求（1）**：方案内容与前文需求不符合，存在错误理解需求的问题；
- **不可用（2）**：结果不具有现实可实现性，过于理想或不符合实际情况；
- **不够多样（3）**：方案种类不够多样，预期获得更多的选择；

以下是不够细致的对话示例：
{zero_example}

以下是不满足需求的对话示例：
{one_example}

以下是不可用的对话示例：
{two_example}

以下是不够多样的对话示例：
{three_example}

以下为你需要判断的对话：
{context}

请根据上述对话与原则，判断用户对于 LLM 最新一轮回答为什么不满意（0/1/2/3），注意不要输出除了 0/1/2/3 之外的其他字符：""", """## 任务背景
你需要分析用户对LLM回复不满意的潜在原因。

## 分类标准
请根据以下四种类型进行判断，优先选择最符合的单一类别：
0. **不够细致**：方案细节缺失关键信息，无法直接执行
1. **不满足需求**：内容与用户明确需求存在矛盾或偏差
2. **不可用**：方案存在现实可行性问题（如资源/时间/技术要求过高）
3. **不够多样**：缺乏符合要求的备选方案或变化形式

## 参考示例
### 0. 不够细致示例
<example>
{zero_example}
</example>

### 1. 不满足需求示例
<example>
{one_example}
</example>

### 2. 不可用示例
<example>
{two_example}
</example>

### 3. 不够多样示例
<example>
{three_example}
</example>

## 分析流程
1. **需求对齐检查**：对比用户原始需求与系统回复的核心要素
2. **细节完整性评估**：检查步骤说明、参数描述、操作指引等必要信息
3. **可行性验证**：评估时间成本、资源获取、技术要求等现实条件
4. **多样性判断**：分析备选方案的数量和质量差异
5. **示例对比**：参考同类问题的典型错误表现

## 输出格式
请用JSON格式输出分析结果：
```json
{{
  "classification": 0-3 的整数,
  "confidence": 0.1-1.0 的浮点数,
  "reason": "不超过 100 字的具体解释，需引用对话中的矛盾点",
  "suggestion": "针对性的改进建议"
}}
```

## 注意事项
1. 当存在多个可能类别时，选择矛盾最突出的类别
2. 避免主观推测，需基于对话中的显性证据
3. 对专业领域术语需保持谨慎判断
4. 特别注意用户特别强调的约束条件（如预算/时间/技能水平）

## 对话上下文历史
以下是你需要判断的对话的上下文。

{context}
""", """请根据以下用户和 LLM 的对话判断用户对于 LLM 最新一次回答为什么不够满意，以下为不够满意的可能原因：
- **不够细致（0）**：方案细节不够具体，预期获得更具体的描述；
- **不满足需求（1）**：方案内容与前文需求不符合，存在错误理解需求的问题；
- **不可用（2）**：结果不具有现实可实现性，过于理想或不符合实际情况；
- **不够多样（3）**：方案种类不够多样，预期获得更多的选择；

已知用户的部分画像如下：
{profile}

以下是不够细致的对话示例：
{zero_example}

以下是不满足需求的对话示例：
{one_example}

以下是不可用的对话示例：
{two_example}

以下是不够多样的对话示例：
{three_example}

以下为你需要判断的对话：
{context}

请根据上述对话与原则，判断用户对于 LLM 最新一轮回答为什么不满意（0/1/2/3），注意不要输出除了 0/1/2/3 之外的其他字符：""", """请根据以下用户和 LLM 的对话判断用户对于 LLM 最新一次回答为什么不够满意，以下为不够满意的可能原因：
- **不够细致（0）**：方案细节不够具体，预期获得更具体的描述；
- **不满足需求（1）**：方案内容与前文需求不符合，存在错误理解需求的问题；
- **不可用（2）**：结果不具有现实可实现性，过于理想或不符合实际情况；
- **不够多样（3）**：方案种类不够多样，预期获得更多的选择；

已知用户的部分画像如下：
{profile}

以下是不够细致的对话示例：
{zero_example}

以下是不满足需求的对话示例：
{one_example}

以下是不可用的对话示例：
{two_example}

以下是不够多样的对话示例：
{three_example}

以下为你需要判断的对话：
{context}

请根据上述对话与原则，判断用户对于 LLM 最新一轮回答为什么不满意（0/1/2/3），并输出最可能的两种原因（如输出 3,1，表示不够多样最有可能，其次为不满足需求），注意不要输出除了 0/1/2/3/, 之外的其他字符："""]

reason_in_context_prompts = ["""请判断用户对于你的最新一次回答为什么不够满意，以下为不够满意的可能原因：
- **不够细致（0）**：方案细节不够具体，预期获得更具体的描述；
- **不满足需求（1）**：方案内容与前文需求不符合，存在错误理解需求的问题；
- **不可用（2）**：结果不具有现实可实现性，过于理想或不符合实际情况；
- **不够多样（3）**：方案种类不够多样，预期获得更多的选择；

以下是不够细致的对话示例：
{zero_example}

以下是不满足需求的对话示例：
{one_example}

以下是不可用的对话示例：
{two_example}

以下是不够多样的对话示例：
{three_example}

请根据上述原则与示例，判断用户对于你最新一轮回答为什么不够满意（0/1/2/3），注意不要输出除了 0/1/2/3 之外的其他字符""", """## 任务背景
你需要分析用户对LLM回复不满意的潜在原因。

## 分类标准
请根据以下四种类型进行判断，优先选择最符合的单一类别：
0. **不够细致**：方案细节缺失关键信息，无法直接执行
1. **不满足需求**：内容与用户明确需求存在矛盾或偏差
2. **不可用**：方案存在现实可行性问题（如资源/时间/技术要求过高）
3. **不够多样**：缺乏符合要求的备选方案或变化形式

## 参考示例
### 0. 不够细致示例
<example>
{zero_example}
</example>

### 1. 不满足需求示例
<example>
{one_example}
</example>

### 2. 不可用示例
<example>
{two_example}
</example>

### 3. 不够多样示例
<example>
{three_example}
</example>

## 分析流程
1. **需求对齐检查**：对比用户原始需求与系统回复的核心要素
2. **细节完整性评估**：检查步骤说明、参数描述、操作指引等必要信息
3. **可行性验证**：评估时间成本、资源获取、技术要求等现实条件
4. **多样性判断**：分析备选方案的数量和质量差异
5. **示例对比**：参考同类问题的典型错误表现

## 输出格式
请用JSON格式输出分析结果：
```json
{{
  "classification": 0-3 的整数,
  "confidence": 0.1-1.0 的浮点数,
  "reason": "不超过 100 字的具体解释，需引用对话中的矛盾点",
  "suggestion": "针对性的改进建议"
}}
```

## 注意事项
1. 当存在多个可能类别时，选择矛盾最突出的类别
2. 避免主观推测，需基于对话中的显性证据
3. 对专业领域术语需保持谨慎判断
4. 特别注意用户特别强调的约束条件（如预算/时间/技能水平）
""", """请判断用户对于你的最新一次回答为什么不够满意，以下为不够满意的可能原因：
- **不够细致（0）**：方案细节不够具体，预期获得更具体的描述；
- **不满足需求（1）**：方案内容与前文需求不符合，存在错误理解需求的问题；
- **不可用（2）**：结果不具有现实可实现性，过于理想或不符合实际情况；
- **不够多样（3）**：方案种类不够多样，预期获得更多的选择；

已知用户的部分画像如下：
{profile}

以下是不够细致的对话示例：
{zero_example}

以下是不满足需求的对话示例：
{one_example}

以下是不可用的对话示例：
{two_example}

以下是不够多样的对话示例：
{three_example}

请根据上述原则与示例，判断用户对于你最新一轮回答为什么不够满意（0/1/2/3），注意不要输出除了 0/1/2/3 之外的其他字符"""]
